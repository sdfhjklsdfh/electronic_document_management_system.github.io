!function(e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():window.MobileMenu=e()}((function(){return MobileMenu=function(e,t){let n=this,o=function(e,t){for(let n in e)void 0===t[n]?t[n]=e[n]:"object"==typeof t[n]&&o(e[n],t[n])};return n.options=t||{},n.selector=e,n.defaults={menuClass:"active",overlayClass:"active",openButtonClass:"active",fakeScrollbarClass:"active",bodyClass:"no-scroll",allowPageScroll:!1,overlayClick:!0,escToClose:!0,toRight:!1,toLeft:!1,fixHeader:"",fixHeaderClass:"fixed",fixHeaderThreshold:0,fade:!1,swipe:!0,swipeThreshold:.3,fakeScrollbar:"#fake-scrollbar"},n.$menu=null,n.$openButton=null,n.$closeButtons=null,n.$overlay=null,n.$fakeScrollbar=null,n.$header=null,n.$headerClone=null,n.$headerParent=null,n.menuWidth=0,n.menuHeight=0,n.opened=!1,n.trfRegExp=/([-0-9.]+(?=px))/,n.trf={property:"transform",from:"",to:"translate3d(0px, 0px, 0px)",timigFunction:"ease",delay:0,duration:.5},n.fade={property:"opacity",from:"0",to:"1",timigFunction:"ease",delay:0,duration:.5},n.swipeObject={isSwipe:!1,isScroll:!1,posX1:0,posX2:0,posY1:0,posY2:0,posInitX:0,posInitY:0},n.openMenuHandler={handleEvent:n.openMenu,ctx:n},n.closeMenuHandler={handleEvent:n.closeMenu,ctx:n},n.transitionHandler={handleEvent:n.transitionEnd,ctx:n},n.swipeStartHandler={handleEvent:n.swipeStart,ctx:n},n.swipeActionHandler={handleEvent:n.swipeAction,ctx:n},n.swipeEndHandler={handleEvent:n.swipeEnd,ctx:n},n.fixHeaderHandler={handleEvent:n.fixHeader,ctx:n},n.unfixHeaderHandler={handleEvent:n.unfixHeader,ctx:n},o(n.defaults,n.options),n.init(),n.$menu},MobileMenu.prototype.init=function(){let e,t=this,n=t.options,o=n.openButton,s=n.closeButtons,i=n.overlay,l=n.fixHeader;q=function(e){return document.querySelector(e)},t.$menu=q(t.selector),o&&(t.$openButton=q(o)),s&&(t.$closeButtons=document.querySelectorAll(s)),i&&(t.$overlay=q(i)),!n.allowPageScroll&&(t.$fakeScrollbar=q(n.fakeScrollbar)),l&&(t.$fixHeader=q(l));let a=t.$menu;if(i=t.$overlay,l=t.$fixHeader,n.fade)e=t.fade,n.swipe=!1;else{n.toRight||n.toLeft||(n.toLeft=!0);let o=n.toRight?"-100%":n.toLeft?"100%":"0px";t.trf.from="translate3d("+o+", 0px, 0px)",e=t.trf}i&&(i.style.cssText="transition:opacity .5s;opacity:0"),a.style.cssText="transition:"+e.property+" "+e.duration+"s "+e.delay+"s "+e.timigFunction+";"+e.property+":"+e.from,"none"===a.style.display&&(a.style.display=""),l&&(t.$headerClone=l.cloneNode(!0),t.$headerParent=l.parentElement,t.options.fixHeaderThreshold=l.getBoundingClientRect().bottom+pageYOffset,t.$headerClone.style.opacity=0,t.$headerClone.style.pointerEvents="none",t.fixHeader()),t.initEvents(),t.$menu.openMenu=t.openMenu,t.$menu.closeMenu=t.closeMenu,t.dispatchEvent(a,"menuinit")},MobileMenu.prototype.initEvents=function(){let e=this,t=e.options,n=e.$menu,o=e.$openButton,s=e.$closeButtons,i=e.$overlay;o.addEventListener("click",e.openMenuHandler);for(let t=0;t<s.length;t++)s[t].addEventListener("click",e.closeMenuHandler);n.addEventListener("transitionend",e.transitionHandler),t.swipe&&!t.fade&&n.addEventListener("touchstart",e.swipeStartHandler),t.escToClose&&document.addEventListener("keyup",e.closeMenuHandler),i&&t.overlayClick&&i.addEventListener("click",e.closeMenuHandler),e.$fixHeader&&window.addEventListener("scroll",e.fixHeaderHandler)},MobileMenu.prototype.openMenu=function(e){let t,n=this.ctx||this,o=n.options,s=n.$menu,i=n.$openButton,l=(n.$closeButton,n.$overlay),a=n.$fakeScrollbar,r=document.body;n.opened||(!0!==e&&n.dispatchEvent(s,"menubeforeopen"),event&&"click"===event.type&&(n.$caller=s.caller=event.target),l&&l.classList.add(o.overlayClass),i.classList.add(o.openButtonClass),s.classList.add(o.menuClass),a&&(a.classList.add(o.fakeScrollbarClass),r.classList.add(o.bodyClass),r.style.paddingRight=a.offsetWidth-a.clientWidth+"px"),n.menuWidth=s.offsetWidth,n.menuHeight=s.offsetHeight,!0!==e&&(s.scrollTop=0),t=o.fade?n.fade:n.trf,s.style.cssText="transition:"+t.property+" "+t.duration+"s "+t.delay+"s "+t.timigFunction+";"+t.property+":"+t.to,l&&(l.style.opacity=1))},MobileMenu.prototype.closeMenu=function(e){if(event&&"keyup"===event.type&&27!==event.keyCode)return;let t,n=this.ctx||this,o=n.options,s=n.$menu,i=n.$openButton,l=(n.$closeButton,n.$overlay);n.opened&&(e||n.dispatchEvent(s,"menubeforeclose"),i.classList.remove(o.openButtonClass),t=o.fade?n.fade:n.trf,s.style.cssText="transition:"+t.property+" "+t.duration+"s "+t.delay+"s "+t.timigFunction+";"+t.property+":"+t.from,l&&(l.style.opacity=0))},MobileMenu.prototype.swipeStart=function(){let e=this.ctx||this,t=(e.options,e.$menu),n=e.swipeObject,o=event.touches[0]||window.event.touches[0];n.isSwipe=n.isScroll=!1,n.posInitX=n.posX1=o.clientX,n.posInitY=n.posY1=o.clientY,t.addEventListener("touchend",e.swipeEndHandler),t.addEventListener("touchmove",e.swipeActionHandler),t.style.transition=""},MobileMenu.prototype.swipeAction=function(){let e=this.ctx||this,t=e.options,n=e.$menu,o=e.swipeObject,s=event.touches[0]||window.event.touches[0],i=+n.style.transform.match(e.trfRegExp)[0];if(o.posX2=o.posX1-s.clientX,o.posX1=s.clientX,o.posY2=o.posY1-s.clientY,o.posY1=s.clientY,!o.isSwipe&&!o.isScroll){let e=Math.abs(o.posY2);Math.abs(o.posX2);e>7||0===o.posX2?o.isScroll=!0:e<7&&(o.isSwipe=!0)}if(o.isSwipe){if(t.toLeft&&o.posInitX>o.posX1)return void(n.style.transform=e.trf.to);if(t.toRight&&o.posInitX<o.posX1)return void(n.style.transform=e.trf.to);n.style.transform="translate3d("+(i-o.posX2)+"px, 0px, 0px)"}},MobileMenu.prototype.swipeEnd=function(){let e=this.ctx||this,t=e.options,n=e.$menu,o=e.swipeObject;e.trf;o.posFinal=o.posInitX-o.posX1;let s=Math.abs(o.posFinal);s>1&&o.isSwipe&&(t.toLeft&&o.posFinal<0||t.toRight&&o.posFinal>0)&&(s>=e.menuWidth*t.swipeThreshold?e.closeMenu(!0):(e.opened=!1,e.openMenu(!0))),n.removeEventListener("touchend",e.swipeEndHandler),n.removeEventListener("touchmove",e.swipeActionHandler)},MobileMenu.prototype.transitionEnd=function(){let e=this.ctx||this,t=e.options,n=e.$menu,o=(e.$openButton,e.$closeButton,e.$overlay);e.opened?(e.opened=!1,n.classList.remove(t.menuClass),o&&o.classList.remove(t.overlayClass),e.allowPageScroll(),e.dispatchEvent(n,"menuclose")):(e.opened=!0,e.dispatchEvent(n,"menuopen"))},MobileMenu.prototype.dispatchEvent=function(e,t){if("function"==typeof window.CustomEvent){let n=new CustomEvent(t);e.dispatchEvent(n)}},MobileMenu.prototype.allowPageScroll=function(){let e=this.ctx||this,t=e.options,n=e.$fakeScrollbar,o=document.body;n&&(o.style.paddingRight="",n.classList.remove(t.fakeScrollbarClass),o.classList.remove(t.bodyClass))},MobileMenu.prototype.fixHeader=function(){let e=this.ctx||this,t=e.options;!e.$fixHeader.classList.contains(t.fixHeaderClass)&&pageYOffset>t.fixHeaderThreshold&&(e.$headerParent.appendChild(e.$headerParent.replaceChild(e.$headerClone,e.$fixHeader)),e.$fixHeader.classList.add(t.fixHeaderClass),window.removeEventListener("scroll",e.fixHeaderHandler),window.addEventListener("scroll",e.unfixHeaderHandler),e.dispatchEvent(e.$fixHeader,"headerfixed"))},MobileMenu.prototype.unfixHeader=function(){let e=this.ctx||this,t=e.options;e.$fixHeader.classList.contains(t.fixHeaderClass)&&pageYOffset<=t.fixHeaderThreshold&&(e.$headerParent.replaceChild(e.$fixHeader,e.$headerClone),e.$fixHeader.classList.remove(t.fixHeaderClass),window.removeEventListener("scroll",e.unfixHeaderHandler),window.addEventListener("scroll",e.fixHeaderHandler),e.dispatchEvent(e.$fixHeader,"headerunfixed"))},MobileMenu}));